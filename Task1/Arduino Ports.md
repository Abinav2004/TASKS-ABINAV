## PORTB##
![[Pasted image 20240430213803.png]]
-  XTAL2/TOSC2/PCINT7 – Port B, Bit 7 XTAL2: Chip clock oscillator pin 2. Used as clock pin for crystal oscillator or low-frequency crystal oscillator. When used as a clock pin, the pin can not be used as an I/O pin. TOSC2: Timer oscillator pin 2. Used only if internal calibrated RC oscillator is selected as chip clock source
- XTAL1/TOSC1/PCINT6 – Port B, Bit 6 XTAL1: Chip clock oscillator pin 1. Used for all chip clock sources except internal calibrated RC oscillator. When used as a clock pin, the pin can not be used as an I/O pin. TOSC1: Timer oscillator pin 1. Used only if internal calibrated RC oscillator is selected as chip clock source,
- **NOTE:****The "compare mode" allows you to set a compare value, and the timer will generate an interrupt or perform a specific action (like toggling an output pin) when the count matches this value.

1. **Port B (PB7:0)**: This is the collective term for a group of eight pins on the microcontroller, labeled PB0 through PB7.

2. **XTAL1/XTAL2 and TOSC1/TOSC2**: These pins are related to the external clocking system of the microcontroller. XTAL1 and XTAL2 are used for connecting an external crystal oscillator, while TOSC1 and TOSC2 are used for an optional external timer oscillator.

3. **Bi-directional I/O port**: Port B can be configured to either input or output mode, allowing it to both read external signals and drive output signals.

4. **Internal pull-up resistors**: These resistors can be activated internally on each pin of Port B to pull the pin's voltage up when it's configured as an input and not being driven externally.

5. The Port B output buffers have symmetrical drive characteristics with both high sink and source capability. As inputs, port B pins that are externally pulled low will source current if the pull-up resistors are activated
    - **Output Buffers**: Output buffers are components within the microcontroller that interface between the internal logic and the external pins. They are responsible for driving the output signals from the microcontroller to external devices.
    - **Symmetrical Drive Characteristics**:  whether the output buffer is driving a signal high (providing current) or low (absorbing current), its performance remains consistent.
    - **High Sink Capability**: Sink capability refers to the ability of the output buffer to absorb current when the output signal is at a low voltage level. High sink capability means that the output buffer can effectively pull down (sink) a significant amount of current when driving a low signal to external devices.
    - **High Source Capability**: Source capability refers to the ability of the output buffer to provide current when the output signal is at a high voltage level. High source capability means that the output buffer can effectively push out (source) a significant amount of current when driving a high signal to external devices.

6. **Tri-stated**: When in a reset condition, the pins of Port B are tri-stated, meaning they're effectively disconnected from the circuit and not driving or being driven.

7. Depending on the clock selection fuse settings, PB6 can be used as input to the inverting oscillator amplifier and input to the internal clock operating circuit. Depending on the clock selection fuse settings, PB7 can be used as output from the inverting oscillator amplifier

8. **Clock selection fuse settings, inverting oscillator amplifier, and internal clock operating circuit**: This is a circuitry within the microcontroller that amplifies and shapes the signal from an external crystal oscillator. It prepares the signal for use as the microcontroller's clock. The fuse settings determine the clock source, the inverting oscillator amplifier prepares the external clock signal for use, and the internal clock operating circuit governs the timing and operation of the microcontroller.

9. . If the internal calibrated RC oscillator is used as chip clock source, PB7..6 is used as TOSC2..1 input for the asynchronous Timer/Counter2 if the AS2 bit in ASSR is set
    
    **AS2 bit in ASSR and internal calibrated RC oscillator**:  use of an external asynchronous timer oscillator for Timer/Counter2. The AS2 bit in the Asynchronous Status Register (ASSR) enables this feature, and the internal calibrated RC oscillator provides an alternative clock source. This is an internal oscillator within the microcontroller that generates a clock signal based on a resistor-capacitor (RC) network. It can be used as an alternative to an external crystal oscillator.
1. **Synchronous Timer**:
   - A synchronous timer operates in sync with the system clock of the microcontroller.
   - It counts clock cycles generated by the system clock, which is typically derived from an external crystal oscillator or an internal oscillator.
   - Synchronous timers are tightly integrated with the microcontroller's core clock and execute instructions in sync with it.
   - They are often used for tasks that require precise timing intervals or synchronization with other system operations.

2. **Asynchronous Timer**:
   - An asynchronous timer operates independently of the system clock.
   - It has its own clock source, which may be an external oscillator or an internal oscillator distinct from the main system clock.
   - Asynchronous timers are not synchronized with the microcontroller's core clock and may operate at a different frequency or with different timing characteristics.
   - They are useful for tasks that require timing operations independent of the main system clock or for conserving power by operating at lower frequencies when the main system clock is disabled or running at a different rate.


## PORTC ##
![[Pasted image 20240430214626.png]]
Port C is a 7-bit bi-directional I/O port with internal pull-up resistors (selected for each bit). The PC5..0 output buffers have symmetrical drive characteristics with both high sink and source capability. As inputs, Port C pins that are externally pulled low will source current if the pull-up resistors are activated. The port C pins are tri-stated when a reset condition becomes active, even if the clock is not running.
**PC6/RESET:**
1. **Reset Input**: If the RSTDISBL fuse is unprogrammed (meaning it is set to its default state), PC6 is used as a reset input. This means that a low level signal on this pin, held for longer than the minimum pulse length specified in the datasheet, will trigger a reset of the microcontroller. This reset occurs even if the clock of the microcontroller is not running. It's worth noting that shorter pulses may not reliably trigger a reset.

2. **Input Pin**: If the RSTDISBL fuse is programmed (meaning it is configured to disable the reset functionality), PC6 is used as a general-purpose input pin. In this mode, it can be configured for various purposes within the user's application.

3. **Reset Input Mode**: When the microcontroller is powered on or when a reset condition occurs (either due to a power-on reset, external reset signal, or watchdog timer reset), PC6/RESET pin is set as an input with an internal pull-up resistor enabled. This pull-up resistor keeps the pin high under normal conditions. To trigger a reset, the pin must be driven low (pulled to ground) for longer than the minimum pulse length specified in the datasheet. This pulse length ensures that unintentional glitches or noise do not trigger a reset.

## PORT D ##
![[Pasted image 20240430214752.png]]
Port D is an 8-bit bi-directional I/O port with internal pull-up resistors (selected for each bit). The port D output buffers have symmetrical drive characteristics with both high sink and source capability. As inputs, port D pins that are externally pulled low will source current if the pull-up resistors are activated. The port D pins are tri-stated when a reset condition becomes active, even if the clock is not running.

### WHY Different Ports ###
The use of port names like PORTB, PORTC, and PORTD in microcontrollers, including those used in Arduino boards, stems from the way microcontrollers are architected at the hardware level. Here’s a detailed explanation of why these naming conventions are used instead of a single "IN" port:

### Microcontroller Architecture
Microcontrollers, such as those in the AVR family (used in many Arduino boards), have their input/output pins organized into groups known as ports. Each port consists of several pins (usually 8) that can be controlled together.

1. **Port Grouping**:
    - **Hardware Design**: Microcontrollers are designed with multiple ports to manage a large number of I/O pins efficiently. Each port (like PORTB, PORTC, and PORTD) typically controls up to 8 pins.
    - **Ease of Access**: Grouping pins into ports allows easier and faster manipulation of multiple pins at once. For example, you can set all 8 pins of a port to high or low with a single operation.

1. **Memory-Mapped I/O**:
    - **Registers**: Each port corresponds to specific registers in the microcontroller's memory. For example, PORTB corresponds to a register that controls the state of the pins in Port B.
    - **Direct Manipulation**: Programmers can directly read from or write to these registers to control the pins, which is efficient and fast.
### Naming Conventions
The naming convention of PORTB, PORTC, and PORTD helps in clearly identifying and managing different sets of pins.
1. **Clarity**:
    - **Distinct Names**: Using distinct names for each port helps prevent confusion when programming. Instead of referring to pins generically, you can clearly specify which port and which pin you are addressing.
    - **Pin Numbers**: Each port is associated with specific pins, making it clear which physical pins on the microcontroller you are working with. For instance, PORTB might control pins PB0 to PB7.

2. **Efficient Coding**:
    - **Bitwise Operations**: Ports allow the use of bitwise operations to manipulate multiple pins simultaneously. For example, setting or clearing bits in PORTB affects the corresponding pins directly.
    - **Group Operations**: You can perform operations on an entire port in one instruction, which is more efficient than manipulating each pin individually.


